---
layout: ceshi5
title: 阿里云Dataworks+Maxcompute实时计算数据仓库方案之业务数仓搭建(三)
date: 2020-03-22 21:09:05
tags: 数据仓库
comments: true
---

## 集群规模计算方法

### 用户行为数据 

1. 每条日志1K左右， 每天1亿条： 100000000 / 1024 / 1024 = 约100G 

2. 数仓ODS层采用LZO+parquet存储： 100g压缩为10g左右 

3. 数仓DWD层采用LZO+parquet存储： 10g左右

4.  数仓DWS层轻度聚合存储（ 为了快速运算， 不压缩） ： 50g左右 
<!-- more -->
5. 数仓ADS层数据量很小：忽略不计

6. 保存3副本： 70g*3=210g

7. 半年内不扩容服务器来算： 210g*180天=约37T

8. 预留20%~30%Buf=37T/0.7=53T

### DataHub中数据

1. 每天约100G数据*副本（ 2） =200g 

2. 保存3天*200g=600g 

3. 预留30%buf=600g/0.7=857g=约1T 

### Flume中默认缓存的数据比较小：暂时忽略不计 

### 业务数据 

1. 每天活跃用户100万， 每天下单的用户10万， 每人每天产生的业务数据
   10条， 每条日志1k左右： 10万*10条*1k=1g左右
2. 数仓四层存储： 1g*3=3g*
3. 保存3副本： 3g*3=9g*
4. 半年内不扩容服务器来算： 9g*180天=约1.6T
5. 预留20%~30%Buf=1.6T/0.7=2T

### 集群总规模结果:

计算结果: 53T+1T+2T=56T 

计算机台数: 约8T*7台服务器 

